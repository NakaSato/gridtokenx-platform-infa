<?plantuml 1.2026.0?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="855px" preserveAspectRatio="none" style="width:737px;height:855px;background:#FFFFFF;" version="1.1" viewBox="0 0 737 855" width="737px" zoomAndPan="magnify"><title>&lt;size:18&gt;**Transaction Atomicity &amp; Security Flow**&lt;/size&gt;
Trustless P2P Settlement Execution</title><defs/><g><rect fill="#DDDDDD" height="767.2734" style="stroke:#181818;stroke-width:0.5;" width="107.9824" x="11" y="64.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="77.4858" x="26.2483" y="77.2559">Middleware</text><rect fill="#DDDDDD" height="767.2734" style="stroke:#181818;stroke-width:0.5;" width="327.4902" x="266.6714" y="64.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104.5967" x="378.1182" y="77.2559">Solana Network</text><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="352.793" x="190.948" y="32.4023">Transaction Atomicity &amp; Security Flow</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="254.4883" x="240.1003" y="49.7344">Trustless P2P Settlement Execution</text><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="646.0098" width="8" x="61.4912" y="131.9746"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="64.9912" x2="64.9912" y1="131.9746" y2="777.9844"/></g><g><title/><rect fill="#FFFFFF" height="554.2109" style="stroke:#181818;stroke-width:1;" width="10" x="59.9912" y="205.7734"/></g><g><title>Escrow Program</title><rect fill="#000000" fill-opacity="0.00000" height="646.0098" width="8" x="328.5547" y="131.9746"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="332.0547" x2="332.0547" y1="131.9746" y2="777.9844"/></g><g><title/><rect fill="#FFFFFF" height="482.5898" style="stroke:#181818;stroke-width:1;" width="10" x="327.0547" y="205.7734"/></g><g><title>User Wallets</title><rect fill="#000000" fill-opacity="0.00000" height="646.0098" width="8" x="530.3472" y="131.9746"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="533.8472" x2="533.8472" y1="131.9746" y2="777.9844"/></g><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.9824" x="15" y="83.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.5781" x="23.7021" y="104.5332">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.9824" x="22" y="121.0215">(Rust Signer)</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.7666" x="270.6714" y="83.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7666" x="277.6714" y="104.5332">Escrow Program</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.9541" x="287.0776" y="121.0215">(Anchor PDA)</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.6289" x="477.5327" y="83.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.7695" x="492.4624" y="104.5332">User Wallets</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.6289" x="484.5327" y="121.0215">(SPL Accounts)</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.9824" x="15" y="777.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.5781" x="23.7021" y="798.5195">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.9824" x="22" y="815.0078">(Rust Signer)</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.7666" x="270.6714" y="777.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7666" x="277.6714" y="798.5195">Escrow Program</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.9541" x="287.0776" y="815.0078">(Anchor PDA)</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.6289" x="477.5327" y="777.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.7695" x="492.4624" y="798.5195">User Wallets</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.6289" x="484.5327" y="815.0078">(SPL Accounts)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="725.689" x="5" y="161.2188"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="730.689" y1="161.2188" y2="161.2188"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="730.689" y1="164.2188" y2="164.2188"/><rect fill="#EEEEEE" height="24.4883" style="stroke:#000000;stroke-width:2;" width="210.3472" x="262.6709" y="149.9746"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="192.0625" x="268.6709" y="167.5098">Atomic Settlement Process</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.2847" x="460.7334" y="167.7207">&#160;</text><polygon fill="#181818" points="315.0547,201.7734,325.0547,205.7734,315.0547,209.7734,319.0547,205.7734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="69.9912" x2="321.0547" y1="205.7734" y2="205.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="76.9912" y="201.0313">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.2764" x="107.7783" y="201.0313">match_orders(buy_pda, sell_pda)</text><path d="M225.0513,218.7734 L225.0513,304.7734 L439.0513,304.7734 L439.0513,228.7734 L429.0513,218.7734 L225.0513,218.7734" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M429.0513,218.7734 L429.0513,228.7734 L439.0513,228.7734 L429.0513,218.7734" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162.1064" x="231.0513" y="236.3418">On-Chain Security Core:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.875" x="231.0513" y="251.6523">1. Verify Platform Signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.0068" x="231.0513" y="266.9629">2. Check Buyer Balance (USDC)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.4409" x="231.0513" y="282.2734">3. Check Seller Balance (GXT)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.2534" x="231.0513" y="297.584">4. Validate Price Integrity</text><path d="M316.0547,314.3262 L617.1255,314.3262 L617.1255,321.6367 L607.1255,331.6367 L316.0547,331.6367 L316.0547,314.3262" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="242.1738" style="stroke:#000000;stroke-width:1.5;" width="405.6343" x="316.0547" y="314.3262"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="256.0708" x="331.0547" y="327.8945">Atomic Instructions (One Transaction)</text><polygon fill="#181818" points="521.8472,358.9473,531.8472,362.9473,521.8472,366.9473,525.8472,362.9473" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="337.0547" x2="527.8472" y1="362.9473" y2="362.9473"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="344.0547" y="358.2051">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5947" x="374.8418" y="358.2051">Transfer GXT to Buyer</text><line style="stroke:#181818;stroke-width:1;" x1="533.8472" x2="575.8472" y1="392.2578" y2="392.2578"/><line style="stroke:#181818;stroke-width:1;" x1="575.8472" x2="575.8472" y1="392.2578" y2="405.2578"/><line style="stroke:#181818;stroke-width:1;" x1="534.8472" x2="575.8472" y1="405.2578" y2="405.2578"/><polygon fill="#181818" points="544.8472,401.2578,534.8472,405.2578,544.8472,409.2578,540.8472,405.2578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="540.8472" y="387.5156">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.0547" x="571.6343" y="387.5156">Update Ledger State</text><polygon fill="#181818" points="521.8472,430.5684,531.8472,434.5684,521.8472,438.5684,525.8472,434.5684" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="337.0547" x2="527.8472" y1="434.5684" y2="434.5684"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="344.0547" y="429.8262">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.0054" x="374.8418" y="429.8262">Transfer USDC to Seller</text><line style="stroke:#181818;stroke-width:1;" x1="533.8472" x2="575.8472" y1="463.8789" y2="463.8789"/><line style="stroke:#181818;stroke-width:1;" x1="575.8472" x2="575.8472" y1="463.8789" y2="476.8789"/><line style="stroke:#181818;stroke-width:1;" x1="534.8472" x2="575.8472" y1="476.8789" y2="476.8789"/><polygon fill="#181818" points="544.8472,472.8789,534.8472,476.8789,544.8472,480.8789,540.8472,476.8789" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="540.8472" y="459.1367">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.0547" x="571.6343" y="459.1367">Update Ledger State</text><polygon fill="#181818" points="521.8472,502.1895,531.8472,506.1895,521.8472,510.1895,525.8472,506.1895" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="337.0547" x2="527.8472" y1="506.1895" y2="506.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="344.0547" y="501.4473">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.0444" x="374.8418" y="501.4473">Pay Platform Fee</text><line style="stroke:#181818;stroke-width:1;" x1="533.8472" x2="575.8472" y1="535.5" y2="535.5"/><line style="stroke:#181818;stroke-width:1;" x1="575.8472" x2="575.8472" y1="535.5" y2="548.5"/><line style="stroke:#181818;stroke-width:1;" x1="534.8472" x2="575.8472" y1="548.5" y2="548.5"/><polygon fill="#181818" points="544.8472,544.5,534.8472,548.5,544.8472,552.5,540.8472,548.5" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="540.8472" y="530.7578">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.0547" x="571.6343" y="530.7578">Update Ledger State</text><path d="M342.0547,575.5 L342.0547,661.5 L537.0547,661.5 L537.0547,585.5 L527.0547,575.5 L342.0547,575.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M527.0547,575.5 L527.0547,585.5 L537.0547,585.5 L527.0547,575.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="139.9341" x="348.0547" y="593.0684">Atomicity Guarantee:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.4321" x="348.0547" y="608.3789">If any transfer fails (e.g.,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.8921" x="348.0547" y="623.6895">insufficient funds), the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.1299" x="348.0547" y="639">ENTIRE transaction reverts.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.0547" x="348.0547" y="654.3105">No partial trades possible.</text><line style="stroke:#181818;stroke-width:1;" x1="70.9912" x2="80.9912" y1="688.3633" y2="684.3633"/><line style="stroke:#181818;stroke-width:1;" x1="70.9912" x2="80.9912" y1="688.3633" y2="692.3633"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="69.9912" x2="326.0547" y1="688.3633" y2="688.3633"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="86.9912" y="683.6211">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.6035" x="117.7783" y="683.6211">Success (Finality Confirmation)</text><line style="stroke:#181818;stroke-width:1;" x1="69.9912" x2="111.9912" y1="717.6738" y2="717.6738"/><line style="stroke:#181818;stroke-width:1;" x1="111.9912" x2="111.9912" y1="717.6738" y2="730.6738"/><line style="stroke:#181818;stroke-width:1;" x1="70.9912" x2="111.9912" y1="730.6738" y2="730.6738"/><polygon fill="#181818" points="80.9912,726.6738,70.9912,730.6738,80.9912,734.6738,76.9912,730.6738" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="76.9912" y="712.9316">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.6079" x="107.7783" y="712.9316">Mark Match as SETTLED</text><line style="stroke:#181818;stroke-width:1;" x1="531.8472" x2="521.8472" y1="759.9844" y2="755.9844"/><line style="stroke:#181818;stroke-width:1;" x1="531.8472" x2="521.8472" y1="759.9844" y2="763.9844"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="69.9912" x2="532.8472" y1="759.9844" y2="759.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26.7871" x="76.9912" y="755.2422">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.3369" x="107.7783" y="755.2422">Notify Update via WebSocket</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="267.6465" x="233.5212" y="845.6289">GridTokenX v2.0 | Transaction Security Protocol | 2026</text><?plantuml-src hLHXQ-904Fs-lsBE3uU6rbgl74VHWBMs2DQ6nbuBrwEioIGknbtPtMWjz-DlDearfGV7mUM39CwRDpDlt-odjURfYeD5zGfMvyZeiS9c23qZNl7yz9llUJFDfU6H5Kh2mAgLY8JTmMS8CSgrUxtArDRpUYSknN-ICvqReZ06Wcv0A4iVAvGMHY-KuMWOcwiNQDo8ECvmopKs6D2pvjeI-PeJjZ48nd3DBOLtJx9vHvGGYbIYRZM0cts8eOo1o2h6K6LSSfYYtIgz_0Fho4HQRI7GAjLyHSG36IsKXk1oKFAMW8-9zmOrFF0iGsieBGmcC8WYbKjhoiGgTcYetz-BUEQNijMre0uYagWI3VfzndXkbSnNSohKwCtz7vtEpzx9t6ymLWqBntxL7vp3YjjeyQnqZDeqv_dkUHtp8p2OPUwjnTo1RIZlJQctFweHcLJqeJPKhZQqvztAu-622tautw7IUEvvHVoq3TzHYsG7GSPjelIgE1PkSuq5eDk6uGAZ9LpaEwA-u7GY4KBpFhmSjWh4bpqYf6RhaEl7MOaueo8y4x7hDj22OcDfCNND5FgwpXbBjShNbIC9OCZ0XKaDD6ybGiss9Mib7ObOdHMfM80IQe9gWrLbqmLwZta7lryNFKqmJYadjFHHWF_ExyPt1SgP_sE5WDUEuWhntwX9pSe8MgGB2ofvRuR3lb_dd6Qn-EQ4SG9SxkZQg2PCkCX8UcodxQEoNI5DdYIKxWoVv38shIEm2wo6cSx6TwColxfTD98RhMcNWAagLv1d3XIZWRKoHimpRDTSiDVasFVtLgTPmpnowmNDAo79IOM9PI8qRKtXXnW_h4DjoGuyDrmlwOTMpUruE9hD9gFB0zGLFGWyLTOjHgNpHd1um7ceeYLQLg-utqYMA1g1lAT5F5DBb8-mwROxyAlktSCQqfLXLQGoYdSxtQ-_0G00?></g></svg>