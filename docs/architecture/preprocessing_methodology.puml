@startuml preprocessing_methodology
!include <C4/C4_Component>

title **Preprocessing Methodology - Data Pipeline Components**

LAYOUT_LEFT_RIGHT()

System_Ext(simulator, "Smart Meter Simulator")

Container_Boundary(pipeline, "Preprocessing Pipeline") {
    Component(validator, "Stream Validator", "Rust / Serde")
    Component(enricher, "Metadata Enricher", "Rust")
    Component(persistent_mgr, "Persistence Manager", "Rust")
}

System_Boundary(storage, "Storage Tiers") {
    ContainerDb(redis, "Hot Storage", "Redis")
    ContainerDb(postgres, "Warm Storage", "PostgreSQL")
}

' Data Flow
Rel(simulator, validator, "Send Reading")
Rel(validator, enricher, "Valid Data", "Internal Stream")

Rel(enricher, persistent_mgr, "Enriched Data", "Internal Stream")

Rel(persistent_mgr, redis, "Write Cache", "RESP")
Rel(persistent_mgr, postgres, "Insert Record", "PostgreSQL Wire")

footer GridTokenX | Data Preprocessing Pipeline | 2026
@enduml
