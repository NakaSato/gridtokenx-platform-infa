@startuml
!include <tupadr3/devicons/react>
!include <tupadr3/devicons/python>
!include <tupadr3/devicons/rust>
!include <tupadr3/font-awesome-5/coins>
!include <tupadr3/font-awesome-5/cubes>
!include <tupadr3/font-awesome-5/database>
!include <tupadr3/font-awesome-5/cloud>

title GridTokenX Platform Architecture
caption Enterprise Energy Trading Platform v1.0 - Updated December 2025

skinparam backgroundColor #f8f9fa
skinparam defaultFontName "SF Pro Display", "Segoe UI", system-ui, -apple-system"
skinparam defaultFontSize 12
skinparam handwritten false

skinparam rectangle {
    BackgroundColor #ffffff
    BorderColor #e9ecef
    shadowing false
    RoundCorner 12
    BorderThickness 2
    FontColor #212529
}

skinparam map {
    BackgroundColor #ffffff
    BorderColor #e9ecef
    shadowing false
    RoundCorner 12
    BorderThickness 2
    FontColor #212529
    Padding 15
}

skinparam note {
    BackgroundColor #fff3cd
    BorderColor #ffeaa7
    FontColor #856404
}

skinparam title {
    FontSize 22
    FontStyle bold
    FontColor #1a1a2e
    BackgroundColor #ffffff
    BorderColor #dee2e6
    RoundCorner 8
    Padding 12
    Shadowing false
}

skinparam caption {
    FontSize 11
    FontColor #6c757d
    FontStyle italic
}

' Layer 1: Client Applications
map "<size:18><color:#0d6efd><$react></color> Trading Frontend\n<size:12><color:#6c757d>User Interface Layer</color></size>" as FE {
        **<color:#0d6efd>● Framework</color>** => <color:#495057>Next.js 15, React 19, TypeScript 5</color>
        **<color:#0d6efd>● Styling</color>** => <color:#495057>Tailwind CSS 4, Radix UI, Lucide Icons</color>
        **<color:#0d6efd>● Charts</color>** => <color:#495057>Chart.js 4, Zoom Plugin, D3.js</color>
        **<color:#0d6efd>● Blockchain</color>** => <color:#495057>@solana/web3.js 1.98, Anchor 0.32</color>
        **<color:#0d6efd>● Wallet</color>** => <color:#495057>Wallet Adapter React, Phantom Integration</color>
        **<color:#0d6efd>● State Management</color>** => <color:#495057>Zustand, React Query, SWR</color>
}

' Layer 2: Backend Services
together {
    map "<size:18><color:#fd7e14><$rust></color> API Gateway\n<size:12><color:#6c757d>Backend Services</color></size>" as BE {
        **<color:#fd7e14>● Server</color>** => <color:#495057>Axum 0.8, Tower, Hyper 1</color>
        **<color:#fd7e14>● Runtime</color>** => <color:#495057>Tokio 1, Futures 0.3, async-trait</color>
        **<color:#fd7e14>● Database</color>** => <color:#495057>SQLx (Postgres 16), Redis 7, Connection Pool</color>
        **<color:#fd7e14>● Authentication</color>** => <color:#495057>JWT, Bcrypt, Ed25519, OAuth2</color>
        **<color:#fd7e14>● Blockchain</color>** => <color:#495057>Solana SDK, Anchor Client, JSON RPC</color>
        **<color:#fd7e14>● Documentation</color>** => <color:#495057>Utoipa 4, Swagger UI, Redoc</color>
        **<color:#fd7e14>● Monitoring</color>** => <color:#495057>Tracing, Metrics, Health Checks</color>
    }

    map "<size:18><color:#198754><$python></color> Meter Simulator\n<size:12><color:#6c757d>Data Simulation</color></size>" as SIM {
        **<color:#198754>● API Framework</color>** => <color:#495057>FastAPI 0.104, Uvicorn, Pydantic 2</color>
        **<color:#198754>● Data Processing</color>** => <color:#495057>Pandas 2, NumPy 1, Faker 20</color>
        **<color:#198754>● Async Communication</color>** => <color:#495057>Aiohttp, HTTPX, WebSockets</color>
        **<color:#198754>● Storage Integration</color>** => <color:#495057>Psycopg2, InfluxDB 2, Time Series</color>
        **<color:#198754>● ML/AI</color>** => <color:#495057>Scikit-learn, TensorFlow Lite, Energy Prediction Models</color>
    }
}

' Layer 3: Infrastructure & Blockchain
together {
    map "<size:18><color:#ffc107><$coins></color> Solana Programs\n<size:12><color:#6c757d>Smart Contracts</color></size>" as BC {
        **<color:#ffc107>● Framework</color>** => <color:#495057>Anchor Lang 0.32.1, Anchor SPL</color>
        **<color:#ffc107>● Token Standards</color>** => <color:#495057>SPL Token 9.0, MPL Metadata 3</color>
        **<color:#ffc107>● Core Libraries</color>** => <color:#495057>Solana Program Runtime, Borsh, Base64</color>
        **<color:#ffc107>● Security Features</color>** => <color:#495057>Security Text, CPI Validation</color>
        **<color:#ffc107>● Testing Suite</color>** => <color:#495057>Anchor Test, Solana Program Test</color>
    }

    map "<size:18><color:#dc3545><$database></color> Data Layer\n<size:12><color:#6c757d>Storage and Cache</color></size>" as DATA {
        **<color:#dc3545>● Primary Database</color>** => <color:#495057>PostgreSQL 16, Partitioning, Indexes</color>
        **<color:#dc3545>● Cache Layer</color>** => <color:#495057>Redis 7, Clustering, Persistence</color>
        **<color:#dc3545>● Time Series DB</color>** => <color:#495057>InfluxDB 2, Retention Policies</color>
        **<color:#dc3545>● Backup System</color>** => <color:#495057>pgBackRest, Point-in-Time Recovery</color>
        **<color:#dc3545>● Monitoring Stack</color>** => <color:#495057>Prometheus, Grafana Dashboards</color>
    }
}

' Layout arrangement
FE -[hidden]- BE
BE -[hidden]- SIM
BE -[hidden]- BC
SIM -[hidden]- DATA
BC -[hidden]- DATA

@enduml
