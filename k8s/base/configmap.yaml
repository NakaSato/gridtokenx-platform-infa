apiVersion: v1
kind: ConfigMap
metadata:
  name: gridtokenx-config
  namespace: gridtokenx
data:
  # Application Configuration
  ENVIRONMENT: "production"
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"
  AUDIT_LOG_ENABLED: "true"
  TEST_MODE: "false"
  
  # Database Configuration (non-sensitive)
  POSTGRES_DB: "gridtokenx"
  POSTGRES_USER: "gridtokenx_user"
  MAX_CONNECTIONS: "50"
  MIN_CONNECTIONS: "5"
  DATABASE_MAX_CONNECTIONS: "50"
  DATABASE_MIN_CONNECTIONS: "5"
  
  # Redis Configuration (non-sensitive)
  REDIS_PORT: "6379"
  REDIS_POOL_SIZE: "20"
  REDIS_MAX_CONNECTIONS: "20"
  REDIS_CONNECTION_TIMEOUT: "5"
  REDIS_COMMAND_TIMEOUT: "3"
  REQUEST_TIMEOUT: "30"
  
  # InfluxDB Configuration
  INFLUXDB_URL: "http://localhost:8086"
  INFLUXDB_ORG: "gridtokenx"
  INFLUXDB_BUCKET: "energy_readings"
  
  # Solana Blockchain Configuration
  SOLANA_RPC_URL: "http://solana-validator:8899"
  SOLANA_WS_URL: "ws://solana-validator:8900"
  SOLANA_CLUSTER: "localnet"
  
  # Program IDs (these should be updated after deployment)
  REGISTRY_PROGRAM_ID: "FSXdxk5uPUvJc51MzjtBaCDrFh7RSMcHFHKpzCG9LeuJ"
  ENERGY_TOKEN_PROGRAM_ID: "FaELH72fUMRaLTX3ersmQLr4purfHGvJccm1BXfDPL6r"
  TRADING_PROGRAM_ID: "CEWpf4Rvm3SU2zQgwsQpi5EMYBUrWbKLcAhAT2ouVoWD"
  ORACLE_PROGRAM_ID: "G365L8A4Y3xmp5aN2GGLj2SJr5KetgE5F57PaFvCgSgG"
  GOVERNANCE_PROGRAM_ID: "EAcyEzfXXJCDnjZKUrgHsBEEHmnozZJXKs2wdW3xnWgb"
  ENERGY_TOKEN_MINT: "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"
  
  # Keypair Paths
  ENGINEERING_KEYPAIR_PATH: "./validator-keys/engineering-keypair.json"
  ORACLE_KEYPAIR_PATH: "./validator-keys/oracle-keypair.json"
  ENGINEERING_DEPT_KEYPAIR_PATH: "./validator-keys/engineering-department-authority.json"
  
  # JWT Configuration
  JWT_EXPIRATION: "86400"
  
  # Password Requirements
  PASSWORD_MIN_LENGTH: "8"
  PASSWORD_REQUIRE_UPPERCASE: "true"
  PASSWORD_REQUIRE_LOWERCASE: "true"
  PASSWORD_REQUIRE_NUMBERS: "true"
  PASSWORD_REQUIRE_SPECIAL_CHARS: "true"
  
  # Security Settings
  SECURE_COOKIES: "true"
  SESSION_TIMEOUT: "3600"
  MAX_LOGIN_ATTEMPTS: "5"
  LOCKOUT_DURATION: "900"
  
  # Email Configuration (non-sensitive)
  SMTP_HOST: "mailpit"
  SMTP_PORT: "1025"
  EMAIL_FROM_NAME: "GridTokenX"
  EMAIL_FROM_ADDRESS: "noreply@gridtokenx.com"
  SMTP_FROM: "noreply@gridtokenx.com"
  EMAIL_VERIFICATION_ENABLED: "true"
  EMAIL_VERIFICATION_REQUIRED: "false"
  EMAIL_VERIFICATION_EXPIRY_HOURS: "24"
  EMAIL_VERIFICATION_BASE_URL: "http://localhost:3000"
  EMAIL_AUTO_LOGIN_AFTER_VERIFICATION: "true"
  ENABLE_EMAIL_VERIFICATION: "true"
  ENABLE_EMAIL_NOTIFICATIONS: "true"
  
  # CORS Configuration
  CORS_ALLOWED_ORIGINS: "http://localhost:3000,http://localhost:8080"
  CORS_ALLOWED_METHODS: "GET,POST,PUT,PATCH,DELETE,OPTIONS"
  CORS_ALLOWED_HEADERS: "*"
  CORS_EXPOSE_HEADERS: "*"
  CORS_MAX_AGE: "3600"
  
  # Rate Limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_WINDOW: "60"
  RATE_LIMIT_AUTH_REQUESTS: "10"
  RATE_LIMIT_AUTH_WINDOW: "60"
  RATE_LIMIT_TRADING_REQUESTS: "20"
  RATE_LIMIT_TRADING_WINDOW: "60"
  
  # Monitoring & Observability
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "true"
  PROMETHEUS_METRICS_ENABLED: "true"
  METRICS_PORT: "9090"
  
  # Feature Flags
  ENABLE_WEBSOCKET: "true"
  ENABLE_BLOCKCHAIN_INTEGRATION: "true"
  ENABLE_PUSH_NOTIFICATIONS: "false"
  ENABLE_SMS_NOTIFICATIONS: "false"
  ENABLE_MARKET_DYNAMICS: "true"
  
  # Cache Configuration
  CACHE_TTL_DEFAULT: "3600"
  CACHE_TTL_USER_SESSION: "86400"
  CACHE_TTL_MARKET_DATA: "300"
  CACHE_TTL_ANALYTICS: "1800"
  
  # Tokenization Configuration
  TOKENIZATION_KWH_TO_TOKEN_RATIO: "1.0"
  TOKENIZATION_DECIMALS: "9"
  TOKENIZATION_MAX_READING_KWH: "100.0"
  TOKENIZATION_AUTO_MINT_ENABLED: "true"
  TOKENIZATION_POLLING_INTERVAL_SECS: "60"
  TOKENIZATION_BATCH_SIZE: "50"
  
  # Oracle Configuration
  PROCESSING_INTERVAL: "900"
  ENGINEERING_AUTHORITY: "true"
  
  # REC Configuration
  REC_AUTHORITY_ONLY: "true"
  REC_ISSUING_AUTHORITY: "engineering-department"
  REC_CERTIFICATION_ENABLED: "true"
  CARBON_OFFSET_RATE: "0.7"
  
  # Simulation Configuration (Smart Meter)
  SIMULATION_INTERVAL: "15"
  NUM_METERS: "20"
  SIMULATION_SPEED_MULTIPLIER: "1.0"
  SOLAR_PANEL_EFFICIENCY_MIN: "0.85"
  SOLAR_PANEL_EFFICIENCY_MAX: "0.95"
  BASE_GENERATION_MIN: "3.0"
  BASE_GENERATION_MAX: "15.0"
  BASE_CONSUMPTION_MIN: "1.5"
  BASE_CONSUMPTION_MAX: "8.0"
  NOISE_FACTOR_MIN: "0.05"
  NOISE_FACTOR_MAX: "0.15"
  
  # P2P Trading Configuration
  MIN_SELL_PRICE: "0.15"
  MAX_SELL_PRICE: "0.35"
  MIN_BUY_PRICE: "0.20"
  MAX_BUY_PRICE: "0.40"
  GRID_FEED_IN_RATE: "0.12"
  GRID_PURCHASE_RATE: "0.28"
  
  # Weather Simulation
  WEATHER_SUNNY_WEIGHT: "0.4"
  WEATHER_PARTLY_CLOUDY_WEIGHT: "0.3"
  WEATHER_CLOUDY_WEIGHT: "0.15"
  WEATHER_OVERCAST_WEIGHT: "0.1"
  WEATHER_RAINY_WEIGHT: "0.05"
  WEATHER_CHANGE_FREQUENCY: "5"
  RANDOM_SEED: "42"
  
  # Battery Storage Configuration
  BATTERY_CAPACITY_MIN: "10.0"
  BATTERY_CAPACITY_MAX: "30.0"
  BATTERY_EFFICIENCY_MIN: "0.90"
  BATTERY_EFFICIENCY_MAX: "0.95"
  
  # Meter Type Distribution
  SOLAR_PROSUMER_RATIO: "0.40"
  GRID_CONSUMER_RATIO: "0.35"
  HYBRID_PROSUMER_RATIO: "0.20"
  BATTERY_STORAGE_RATIO: "0.05"
  
  # Mailpit Configuration
  MP_MAX_MESSAGES: "5000"
  MP_DATABASE: "/data/mailpit.db"
  MP_SMTP_AUTH_ACCEPT_ANY: "1"
  MP_SMTP_AUTH_ALLOW_INSECURE: "1"
  TZ: "UTC"
