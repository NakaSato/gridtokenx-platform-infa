@startuml
!include <C4/C4_Container>
!include <tupadr3/devicons/rust>
!include <tupadr3/devicons/postgresql>
!include <tupadr3/devicons/redis>
!include <tupadr3/font-awesome-5/server>
!include <tupadr3/font-awesome-5/envelope>

' Visual Configuration
skinparam defaultFontName "Helvetica Neue"
skinparam defaultFontSize 14
skinparam roundCorner 8
skinparam shadowing false
skinparam backgroundColor #FFFFFF

title **Backend Layer - Service Orchestration**

Container(api_gateway, "API Gateway", "Rust / Axum", "Central orchestration, high-concurrency request handling, and business logic.", $sprite="rust")

System_Boundary(upstream, "Ingress Clients") {
    Container(trading_app, "Trading App", "Next.js", "Main Frontend Client")
    Container(monitoring, "Prometheus", "Monitoring", "Metrics Scraper")
}

System_Boundary(downstream, "Downstream Integration") {
    ContainerDb(postgres, "PostgreSQL", "Relational DB", "Persistent data store for users and orders.", $sprite="postgresql")
    ContainerDb(redis, "Redis", "Key-Value", "In-memory cache and session management.", $sprite="redis")
    ContainerQueue(kafka, "Kafka Cluster", "Message Queue", "Meter telemetry streaming.", $sprite="server")
    Container(solana_cluster, "Solana Network", "L1 Blockchain", "Decentralized consensus and on-chain state.")
    System_Ext(smtp, "Email Service", "SMTP", "System notifications and alerts.", $sprite="envelope")
}

' Egress Protocols
Rel(trading_app, api_gateway, "API Requests", "HTTP/WS")
Rel(monitoring, api_gateway, "Scrape Stats", "HTTP (/metrics)")
Rel(api_gateway, postgres, "Query/Transact", "PostgreSQL Wire")
Rel(api_gateway, redis, "Cache Ops", "RESP")
Rel(api_gateway, kafka, "Consume Events", "Kafka Protocol")
Rel(api_gateway, solana_cluster, "Submit Tx/Read", "JSON RPC")
Rel(api_gateway, smtp, "Send Alerts", "SMTP")

footer GridTokenX v2.0 | Backend Architecture | 2026
@enduml
