<?plantuml 1.2026.0?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="832px" preserveAspectRatio="none" style="width:649px;height:832px;background:#FFFFFF;" version="1.1" viewBox="0 0 649 832" width="649px" zoomAndPan="magnify"><title>&lt;size:18&gt;**Transaction Atomicity &amp; Security Flow**&lt;/size&gt;
Trustless P2P Settlement Execution</title><defs/><g><rect fill="#FFF3E0" height="742.014" rx="4" ry="4" style="stroke:#181818;stroke-width:0.5;" width="91.312" x="11" y="66.072"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="66.84" x="23.236" y="78.12">Middleware</text><rect fill="#EDE7F6" height="742.014" rx="4" ry="4" style="stroke:#181818;stroke-width:0.5;" width="285.428" x="233.15" y="66.072"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="91.104" x="330.312" y="78.12">Solana Network</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="326.916" x="159.896" y="33.072">Transaction Atomicity &amp; Security Flow</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="238.504" x="204.102" y="51.034">Trustless P2P Settlement Execution</text><rect fill="#E8F5E9" height="237.564" rx="4" ry="4" style="stroke:#E8F5E9;stroke-width:1;" width="360.9" x="272.808" y="306.018"/><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="630.098" width="8" x="53.156" y="128.356"/><line style="stroke:#34495E;stroke-width:0.5;stroke-dasharray:5,5;" x1="56.656" x2="56.656" y1="128.356" y2="758.454"/></g><g><title/><rect fill="#FFE0B2" height="538.352" style="stroke:#181818;stroke-width:1;" width="10" x="51.656" y="202.102"/></g><g><title>Escrow Program</title><rect fill="#000000" fill-opacity="0.00000" height="630.098" width="8" x="285.308" y="128.356"/><line style="stroke:#34495E;stroke-width:0.5;stroke-dasharray:5,5;" x1="288.808" x2="288.808" y1="128.356" y2="758.454"/></g><g><title/><rect fill="#D1C4E9" height="468.048" style="stroke:#181818;stroke-width:1;" width="10" x="283.808" y="202.102"/></g><g><title>User Wallets</title><rect fill="#000000" fill-opacity="0.00000" height="630.098" width="8" x="462.852" y="128.356"/><line style="stroke:#34495E;stroke-width:0.5;stroke-dasharray:5,5;" x1="466.352" x2="466.352" y1="128.356" y2="758.454"/></g><rect fill="#FF9800" height="42.632" rx="4" ry="4" style="stroke:#2980B9;stroke-width:0.5;" width="83.312" x="15" y="84.724"/><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="69.312" x="22" y="103.484">API Gateway</text><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="68.664" x="22.324" y="117.8">(Rust Signer)</text><rect fill="#673AB7" height="42.632" rx="4" ry="4" style="stroke:#2980B9;stroke-width:0.5;" width="103.316" x="237.15" y="84.724"/><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="89.316" x="244.15" y="103.484">Escrow Program</text><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="72" x="252.808" y="117.8">(Anchor PDA)</text><rect fill="#512DA8" height="42.632" rx="4" ry="4" style="stroke:#2980B9;stroke-width:0.5;" width="96.452" x="418.126" y="84.724"/><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="67.548" x="432.578" y="103.484">User Wallets</text><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="82.452" x="425.126" y="117.8">(SPL Accounts)</text><rect fill="#FF9800" height="42.632" rx="4" ry="4" style="stroke:#2980B9;stroke-width:0.5;" width="83.312" x="15" y="758.454"/><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="69.312" x="22" y="777.214">API Gateway</text><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="68.664" x="22.324" y="791.53">(Rust Signer)</text><rect fill="#673AB7" height="42.632" rx="4" ry="4" style="stroke:#2980B9;stroke-width:0.5;" width="103.316" x="237.15" y="758.454"/><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="89.316" x="244.15" y="777.214">Escrow Program</text><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="72" x="252.808" y="791.53">(Anchor PDA)</text><rect fill="#512DA8" height="42.632" rx="4" ry="4" style="stroke:#2980B9;stroke-width:0.5;" width="96.452" x="418.126" y="758.454"/><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="67.548" x="432.578" y="777.214">User Wallets</text><text fill="#FFFFFF" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="82.452" x="425.126" y="791.53">(SPL Accounts)</text><rect fill="#E9ECEF" height="3" rx="4" ry="4" style="stroke:#E9ECEF;stroke-width:1;" width="637.708" x="5" y="157.903"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="642.708" y1="157.903" y2="157.903"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="642.708" y1="160.903" y2="160.903"/><rect fill="#E9ECEF" height="25.094" rx="4" ry="4" style="stroke:#000000;stroke-width:2;" width="199.546" x="224.081" y="146.356"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="182.21" x="230.081" y="164.412">Atomic Settlement Process</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="3.336" x="412.291" y="164.846">&#160;</text><polygon fill="#2C3E50" points="271.808,198.102,281.808,202.102,271.808,206.102,275.808,202.102" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="61.656" x2="277.808" y1="202.102" y2="202.102"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="68.656" y="197.498">[01]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="177.816" x="93.992" y="197.378">match_orders(buy_pda, sell_pda)</text><path d="M192.19,219.102 L192.19,292.102 A4,4 0 0 0 196.19,296.102 L381.19,296.102 A4,4 0 0 0 385.19,292.102 L385.19,225.102 L375.19,215.102 L196.19,215.102 A4,4 0 0 0 192.19,219.102" fill="#FFEBEE" style="stroke:#181818;stroke-width:0.5;"/><path d="M375.19,215.102 L375.19,223.102 A2,2 0 0 0 377.19,225.102 L385.19,225.102 L375.19,215.102" fill="#FFEBEE" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="139.128" x="198.19" y="232.15">On-Chain Security Core:</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="146.676" x="198.19" y="246.514">1. Verify Platform Signature</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="172.236" x="198.19" y="260.83">2. Check Buyer Balance (USDC)</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="160.668" x="198.19" y="275.146">3. Check Seller Balance (GXT)</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="133.56" x="198.19" y="289.462">4. Validate Price Integrity</text><path d="M276.808,306.018 L535.092,306.018 L535.092,312.67 L525.092,322.67 L272.808,322.67 L272.808,310.018 A4,4 0 0 1 276.808,306.018" fill="#F8F9FA" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="237.564" rx="4" ry="4" style="stroke:#000000;stroke-width:1.5;" width="360.9" x="272.808" y="306.018"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="217.284" x="287.808" y="319.066">Atomic Instructions (One Transaction)</text><polygon fill="#2C3E50" points="454.352,349.322,464.352,353.322,454.352,357.322,458.352,353.322" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="293.808" x2="460.352" y1="353.322" y2="353.322"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="300.808" y="348.718">[02]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="119.328" x="326.144" y="348.598">Transfer GXT to Buyer</text><line style="stroke:#2C3E50;stroke-width:1;" x1="466.352" x2="508.352" y1="381.974" y2="381.974"/><line style="stroke:#2C3E50;stroke-width:1;" x1="508.352" x2="508.352" y1="381.974" y2="394.974"/><line style="stroke:#2C3E50;stroke-width:1;" x1="467.352" x2="508.352" y1="394.974" y2="394.974"/><polygon fill="#2C3E50" points="477.352,390.974,467.352,394.974,477.352,398.974,473.352,394.974" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="473.352" y="377.37">[03]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="112.02" x="498.688" y="377.25">Update Ledger State</text><polygon fill="#2C3E50" points="454.352,419.626,464.352,423.626,454.352,427.626,458.352,423.626" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="293.808" x2="460.352" y1="423.626" y2="423.626"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="300.808" y="419.022">[04]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="128.208" x="326.144" y="418.902">Transfer USDC to Seller</text><line style="stroke:#2C3E50;stroke-width:1;" x1="466.352" x2="508.352" y1="452.278" y2="452.278"/><line style="stroke:#2C3E50;stroke-width:1;" x1="508.352" x2="508.352" y1="452.278" y2="465.278"/><line style="stroke:#2C3E50;stroke-width:1;" x1="467.352" x2="508.352" y1="465.278" y2="465.278"/><polygon fill="#2C3E50" points="477.352,461.278,467.352,465.278,477.352,469.278,473.352,465.278" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="473.352" y="447.674">[05]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="112.02" x="498.688" y="447.554">Update Ledger State</text><polygon fill="#2C3E50" points="454.352,489.93,464.352,493.93,454.352,497.93,458.352,493.93" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="293.808" x2="460.352" y1="493.93" y2="493.93"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="300.808" y="489.326">[06]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="92.004" x="326.144" y="489.206">Pay Platform Fee</text><line style="stroke:#2C3E50;stroke-width:1;" x1="466.352" x2="508.352" y1="522.582" y2="522.582"/><line style="stroke:#2C3E50;stroke-width:1;" x1="508.352" x2="508.352" y1="522.582" y2="535.582"/><line style="stroke:#2C3E50;stroke-width:1;" x1="467.352" x2="508.352" y1="535.582" y2="535.582"/><polygon fill="#2C3E50" points="477.352,531.582,467.352,535.582,477.352,539.582,473.352,535.582" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="473.352" y="517.978">[07]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="112.02" x="498.688" y="517.858">Update Ledger State</text><path d="M298.808,566.582 L298.808,639.582 A4,4 0 0 0 302.808,643.582 L466.808,643.582 A4,4 0 0 0 470.808,639.582 L470.808,572.582 L460.808,562.582 L302.808,562.582 A4,4 0 0 0 298.808,566.582" fill="#BBFFBB" style="stroke:#181818;stroke-width:0.5;"/><path d="M460.808,562.582 L460.808,570.582 A2,2 0 0 0 462.808,572.582 L470.808,572.582 L460.808,562.582" fill="#BBFFBB" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="120.636" x="304.808" y="579.63">Atomicity Guarantee:</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="127.776" x="304.808" y="593.994">If any transfer fails (e.g.,</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="117.804" x="304.808" y="608.31">insufficient funds), the</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="147.996" x="304.808" y="622.626">ENTIRE transaction reverts.</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="140.676" x="304.808" y="636.942">No partial trades possible.</text><line style="stroke:#2C3E50;stroke-width:1;" x1="62.656" x2="72.656" y1="670.15" y2="666.15"/><line style="stroke:#2C3E50;stroke-width:1;" x1="62.656" x2="72.656" y1="670.15" y2="674.15"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="61.656" x2="282.808" y1="670.15" y2="670.15"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="78.656" y="665.546">[08]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="165.564" x="103.992" y="665.426">Success (Finality Confirmation)</text><line style="stroke:#2C3E50;stroke-width:1;" x1="61.656" x2="103.656" y1="698.802" y2="698.802"/><line style="stroke:#2C3E50;stroke-width:1;" x1="103.656" x2="103.656" y1="698.802" y2="711.802"/><line style="stroke:#2C3E50;stroke-width:1;" x1="62.656" x2="103.656" y1="711.802" y2="711.802"/><polygon fill="#2C3E50" points="72.656,707.802,62.656,711.802,72.656,715.802,68.656,711.802" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="68.656" y="694.198">[09]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="134.7" x="93.992" y="694.078">Mark Match as SETTLED</text><line style="stroke:#2C3E50;stroke-width:1;" x1="464.352" x2="454.352" y1="740.454" y2="736.454"/><line style="stroke:#2C3E50;stroke-width:1;" x1="464.352" x2="454.352" y1="740.454" y2="744.454"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="61.656" x2="465.352" y1="740.454" y2="740.454"/><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="21.336" x="68.656" y="735.85">[10]</text><text fill="#000000" font-family="'Helvetica Neue'" font-size="12" lengthAdjust="spacing" textLength="158.46" x="93.992" y="735.73">Notify Update via WebSocket</text><text fill="#888888" font-family="'Helvetica Neue'" font-size="10" lengthAdjust="spacing" textLength="244.48" x="201.114" y="821.886">GridTokenX v2.0 | Transaction Security Protocol | 2026</text><?plantuml-src hLLjRzf84Fw-lsAEI7S49PIt910bI1ZiN2HAKKtQIjTJjTXZM65swUuQIg_zxpT-8JZXfDD9vm_8U9vvU-QPtLyscY_M72ogxs1rWepz1X-4INWCGoKZiKWqjq99PbP2RhZcQmWnuabiFINjXAyHAhzZl4Kh0WuJJB3opr1VV4Tejaf6hH8P3fMMgA5R-cwMF5Gx8HSGyTXWoJBdmMfHkCLAmvcNFQpiZ5yJb072Nmpe6MYjTWMuDMoxLutiyrX4E1OI7QL3r8MztUdqhjoNzjS9tQ7Ny9ePPierzImsNDeNOLgzRiFfdK1UHsftUjsHyngMCfK3TajXCJC_aDlcnD_hUZrla056OYie_scnFNVeUkmdOrRO6E7Eq0nkczr-hJRJN1eUf9E5WLLhIc_ty2lu62GwVVLYjQlLxjwaBltFSgOJGo6CWMbhIYXBVzOeBRZVo2CJ29khRr1vAy8mnXtNMCd6qtPpnZV77g4oc3x20xS4st-MrVSK6don81sSLu2RWodr9ouR36K85Bp8uAkOorHgTgVqYhAu8_V6kpxDufg0XWzJhHQa34eqaC6IU9cE1dcU0d1sVTCUE3Ud0PuCAVCZZsEqXjpzwHW6GK04MvC7A6nmTjLiZGRTOw7tzmUoE_sStZ9dL550L1RamlqzOponIYRhEIMitCtxVpGQVzwzcVShZ1t8kEmVwhs5DRV1yaicEbET9_ilcv1VaFJZE7qxP-bWj-HNPj9jEAsZuT3wg3dik3t6fAAFQalf3nRoSDny6sgrT_9okEH27lL1UuktjLfcRzRX0seHxM4QSniflSx6oMsYSmMtwZ1SOh029zbJ2eVJ16b5gq_-Q7YU8Te7X4zDb24FdsOveaD9U2p2jFgf5cHxb1ONQJ4Pxsa7ZANwtv0akjwLsokKJK13HricTWFLTnAX9FyyUj4raNoOwMqEYgWOgW6ioelFq0VC2_ZJ9gjjZE62V7pBY_Nzz_Wf3Mc2lFV_CSEKbqRY8VwtqCHg8Gmj5aiBAdeMX-DudkCKuZYU7my9dS4qbMTbF4R0vPukbgBJY8kOHe3rHVqYBrj8aqGHkQUB4T7PPSulm2wnQ6eoUtplvlx5QQMHL6fDFGTCLBwoT5qHA4G36sMCcCTOBwdYmCrbl_-y4hVW9q6wXb3rX2HbPQAc6q-lUQwB45-joujbFCPvo_MAVcWbqpF1TsUpiJiwGjEaHw8dogQBKl2z5Hm-ujnNmGejAsSit1cB5BL06jGYdAaLoa-mRTKRyAEiuUDQqj5YLQ1YihSQhUk_0G00?></g></svg>